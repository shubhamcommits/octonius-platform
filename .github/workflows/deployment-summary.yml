name: ðŸ“Š Deployment Summary

on:
  workflow_call:
    inputs:
      environment:
        required: true
        type: string
      web_s3_bucket:
        required: true
        type: string
      web_cloudfront_id:
        required: true
        type: string
      web_image_uri:
        required: true
        type: string

jobs:
  summary:
    name: ðŸ“Š Deployment Summary
    runs-on: ubuntu-latest
    if: always()
    
    steps:
      - name: ðŸ“ Generate Summary
        run: |
          echo "## ðŸš€ Deployment Summary for ${{ inputs.environment }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          
          echo "### ðŸŒ Web Application" >> $GITHUB_STEP_SUMMARY
          echo "- S3 Bucket: \`${{ inputs.web_s3_bucket }}\`" >> $GITHUB_STEP_SUMMARY
          echo "- CloudFront Distribution: \`${{ inputs.web_cloudfront_id }}\`" >> $GITHUB_STEP_SUMMARY
          echo "- Docker Image: \`${{ inputs.web_image_uri }}\`" >> $GITHUB_STEP_SUMMARY
          
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### ðŸ“… Deployment Time" >> $GITHUB_STEP_SUMMARY
          echo "- $(date -u +"%Y-%m-%d %H:%M:%S UTC")" >> $GITHUB_STEP_SUMMARY
          
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### ðŸ”„ Next Steps" >> $GITHUB_STEP_SUMMARY
          echo "1. Verify the deployment in the AWS Console" >> $GITHUB_STEP_SUMMARY
          echo "2. Test the application endpoints" >> $GITHUB_STEP_SUMMARY
          echo "3. Monitor CloudWatch metrics for any issues" >> $GITHUB_STEP_SUMMARY 
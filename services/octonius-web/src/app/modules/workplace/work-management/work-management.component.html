<div class="min-h-screen bg-base-100 p-6">
  <div class="max-w-6xl mx-auto">
    <!-- Skeleton Loader -->
    <ng-container *ngIf="isLoading">
      <div class="animate-pulse space-y-8">
        <!-- Header skeleton -->
        <div class="flex flex-col items-center py-8">
          <div class="flex items-center gap-3 mb-2">
            <div class="w-12 h-12 bg-base-300 rounded"></div>
            <div class="h-8 w-24 bg-base-300 rounded"></div>
          </div>
          <div class="bg-base-200 border border-base-300 rounded-lg px-8 py-4 w-full max-w-xl">
            <div class="h-4 bg-base-300 rounded w-3/4 mx-auto"></div>
          </div>
        </div>

        <!-- Top bar skeleton -->
        <div class="mt-4 mb-8 mx-auto max-w-6xl">
          <div class="h-12 bg-base-200 rounded-lg"></div>
        </div>

        <!-- Group cards skeleton -->
        <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5">
          <div *ngFor="let i of [1,2,3,4,5,6,7,8,9,10]" class="bg-base-200 border border-base-300 rounded-lg flex flex-col overflow-hidden">
            <div class="h-40 bg-base-300 w-full"></div>
            <div class="p-4">
              <div class="h-6 w-3/4 bg-base-300 rounded mx-auto"></div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>

    <!-- Header -->
    <div class="flex flex-col items-center py-8" *ngIf="!isLoading">
      <div class="flex items-center gap-3 mb-2">
        <img src="https://media.octonius.com/assets/icon_workmanagement.svg" alt="Work Management" class="w-12 h-12" />
        <h1 class="text-3xl font-bold">Work Management</h1>
      </div>
      <div class="bg-base-200 border border-base-300 rounded-lg px-8 py-4 text-center max-w-xl">
        Organize your work with groups, collaborate with team members, and track progress efficiently.
      </div>
    </div>

    <!-- Top Bar -->
    <div class="mt-4 mb-8" *ngIf="!isLoading">
      <app-topbar 
        [showFilter]="true" 
        [showAdd]="true" 
        [showSearch]="true" 
        searchPlaceholder="Search groups..."
        (filter)="onFilter()" 
        (add)="onAdd()" 
        (search)="onSearch($event)">
      </app-topbar>
    </div>

    <!-- Content -->
    <div *ngIf="!isLoading">
      <!-- Empty State -->
      <div *ngIf="displayGroups.length === 0" class="flex flex-col items-center py-12">
        <img [src]="getEmptyStateImage()" alt="No groups" class="w-64 mb-6">
        <div class="text-base-content/60 text-center max-w-md">
          {{ getEmptyStateMessage() }}
        </div>
        <button 
          *ngIf="!isShowingSearchResults"
          (click)="onAddGroup()" 
          class="btn btn-primary mt-6">
          <lucide-icon name="Plus" class="w-4 h-4 mr-2"></lucide-icon>
          Create Your First Group
        </button>
      </div>

      <!-- Groups List -->
      <div *ngIf="displayGroups.length > 0">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-xl font-semibold">
            {{ isShowingSearchResults ? 'Search Results' : 'Work Groups' }}
            <span class="text-base-content/60 text-sm font-normal ml-2">
              ({{ displayGroups.length }} {{ displayGroups.length === 1 ? 'group' : 'groups' }})
            </span>
          </h2>
          <button 
            (click)="onSort()" 
            class="btn btn-outline btn-sm">
            <lucide-icon name="ArrowUpDown" class="w-4 h-4 mr-2"></lucide-icon>
            Sort
          </button>
        </div>
        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5">
          <div 
            *ngFor="let group of displayGroups" 
            (click)="onGroupClick(group)"
            class="bg-base-100 border border-base-300 rounded-xl overflow-hidden cursor-pointer flex flex-col group hover:shadow-lg transition-all duration-200">
            <img 
              [src]="group.imageUrl || 'https://media.octonius.com/assets/icon_projects.svg'" 
              [alt]="group.name" 
              class="h-48 w-full object-cover object-center bg-base-200" />
            <div class="p-4 flex-1 flex items-center justify-center">
              <div class="text-lg font-medium text-center group-hover:text-primary transition-colors truncate w-full">
                {{ group.name }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Create Group Modal -->
<app-create-group-modal 
  [open]="showCreateModal" 
  (close)="handleModalClose()" 
  (groupCreated)="handleGroupCreated($event)">
</app-create-group-modal>
